<!DOCTYPE html>
<html>
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <title>Bài 5: Lập trình Socket TCP trong Java</title>
</head>
<body>
  <h2 id="1-mở-đầu-tại-sao-devops-cần-hiểu-tcp">1. Mở đầu: Tại sao DevOps cần hiểu TCP?</h2>
<p>Trong Buổi 4, chúng ta đã học cách tìm địa chỉ nhà (IP/DNS). Hôm nay, chúng ta sẽ học cách <strong>gõ cửa và nói chuyện</strong> với chủ nhà thông qua giao thức TCP.</p>
<p>Trong thế giới DevOps, khi bạn debug lỗi &ldquo;Connection Refused&rdquo; hay cấu hình Load Balancer, bạn đang làm việc trực tiếp trên nền tảng của TCP.</p>
<h3 id="tcp-là-gì">TCP là gì?</h3>
<p>TCP (Transmission Control Protocol) là giao thức hướng kết nối, đảm bảo độ tin cậy cao.</p>
<ul>
<li><strong>Không mất dữ liệu:</strong> Gói tin bị mất sẽ được gửi lại</li>
<li><strong>Đúng thứ tự:</strong> Dữ liệu đến nơi theo đúng trình tự gửi</li>
<li><strong>Kiểm soát luồng:</strong> Đảm bảo bên nhận không bị &ldquo;ngộp&rdquo; dữ liệu</li>
</ul>
<p>Để thiết lập kết nối, TCP sử dụng quy trình <strong>Bắt tay 3 bước (Three-way handshake)</strong>: SYN → SYN-ACK → ACK.</p>
<h2 id="2-mô-hình-client---server">2. Mô hình Client - Server</h2>
<p>Mọi ứng dụng mạng TCP đều hoạt động dựa trên mô hình này.</p>
<ol>
<li><strong>Server (Máy chủ):</strong> Chạy trước, mở cổng (Port) và chờ đợi</li>
<li><strong>Client (Máy khách):</strong> Chạy sau, chủ động kết nối tới IP và Port của Server</li>
<li><strong>Giao tiếp:</strong> Hai bên truyền nhận dữ liệu qua luồng (Stream)</li>
</ol>
<h2 id="3-lập-trình-tcp-socket-trong-java">3. Lập trình TCP Socket trong Java</h2>
<p>Java cung cấp 2 class chính trong gói <code>java.net</code> để xử lý TCP.</p>
<h3 id="31-serversocket-dành-cho-server">3.1. ServerSocket (Dành cho Server)</h3>
<p>Class này dùng để tạo máy chủ và lắng nghe kết nối.</p>
<ul>
<li><strong>Khởi tạo:</strong> <code>ServerSocket(int port)</code> - Mở cổng để nghe</li>
<li><strong>Chấp nhận:</strong> <code>Socket accept()</code> - Chặn chương trình cho đến khi có Client kết nối. Trả về một đối tượng <code>Socket</code> để giao tiếp riêng với Client đó</li>
</ul>
<h3 id="32-socket-dành-cho-client--giao-tiếp">3.2. Socket (Dành cho Client &amp; Giao tiếp)</h3>
<p>Class này đại diện cho một đầu mối kết nối (endpoint).</p>
<ul>
<li><strong>Khởi tạo (Client):</strong> <code>Socket(String host, int port)</code> - Kết nối tới Server</li>
<li><strong>Gửi dữ liệu:</strong> <code>OutputStream getOutputStream()</code></li>
<li><strong>Nhận dữ liệu:</strong> <code>InputStream getInputStream()</code></li>
</ul>
<h2 id="4-code-thực-chiến-ứng-dụng-echo-đơn-giản">4. Code Thực Chiến: Ứng dụng Echo Đơn Giản</h2>
<p>Dưới đây là ví dụ cơ bản nhất: Client gửi lời chào, Server trả lời lại.</p>
<h3 id="code-server">Code Server</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.io.*</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.net.*</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SimpleServer</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">main</span><span style="color:#1f2328">(</span>String<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 1. Mở cổng 1234</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#fff">            </span>ServerSocket<span style="color:#fff"> </span>serverSocket<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>ServerSocket<span style="color:#1f2328">(</span>1234<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Server đang lắng nghe tại cổng 1234...&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 2. Chờ Client kết nối (Blocking)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#fff">            </span>Socket<span style="color:#fff"> </span>clientSocket<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>serverSocket<span style="color:#1f2328">.</span><span style="color:#1f2328">accept</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Client đã kết nối!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 3. Tạo luồng đọc/ghi</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#fff">            </span>BufferedReader<span style="color:#fff"> </span>in<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>BufferedReader<span style="color:#1f2328">(</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#fff">                </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>InputStreamReader<span style="color:#1f2328">(</span>clientSocket<span style="color:#1f2328">.</span><span style="color:#1f2328">getInputStream</span><span style="color:#1f2328">())</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#fff">            </span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#fff">            </span>PrintWriter<span style="color:#fff"> </span>out<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>PrintWriter<span style="color:#1f2328">(</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#fff">                </span>clientSocket<span style="color:#1f2328">.</span><span style="color:#1f2328">getOutputStream</span><span style="color:#1f2328">(),</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#fff">            </span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 4. Nhận tin và trả lời</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>message<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>in<span style="color:#1f2328">.</span><span style="color:#1f2328">readLine</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Client nói: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>message<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#fff">            
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#fff">            </span>out<span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Xin chào Client, Server đã nhận được tin!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 5. Đóng kết nối</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#fff">            </span>serverSocket<span style="color:#1f2328">.</span><span style="color:#1f2328">close</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>IOException<span style="color:#fff"> </span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#fff">            </span>e<span style="color:#1f2328">.</span><span style="color:#1f2328">printStackTrace</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><h3 id="code-client">Code Client</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f7f7f7;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.io.*</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#cf222e">import</span><span style="color:#fff"> </span><span style="color:#24292e">java.net.*</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">SimpleClient</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#cf222e">void</span><span style="color:#fff"> </span><span style="color:#6639ba">main</span><span style="color:#1f2328">(</span>String<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>args<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#fff">        </span><span style="color:#cf222e">try</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 1. Kết nối tới Server tại localhost:1234</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#fff">            </span>Socket<span style="color:#fff"> </span>socket<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>Socket<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;localhost&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1234<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 2. Tạo luồng đọc/ghi</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#fff">            </span>BufferedReader<span style="color:#fff"> </span>in<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>BufferedReader<span style="color:#1f2328">(</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#fff">                </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>InputStreamReader<span style="color:#1f2328">(</span>socket<span style="color:#1f2328">.</span><span style="color:#1f2328">getInputStream</span><span style="color:#1f2328">())</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#fff">            </span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#fff">            </span>PrintWriter<span style="color:#fff"> </span>out<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>PrintWriter<span style="color:#1f2328">(</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#fff">                </span>socket<span style="color:#1f2328">.</span><span style="color:#1f2328">getOutputStream</span><span style="color:#1f2328">(),</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#fff">            </span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 3. Gửi tin nhắn tới Server</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#fff">            </span>out<span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Xin chào Server!&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 4. Nhận phản hồi từ Server</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>response<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>in<span style="color:#1f2328">.</span><span style="color:#1f2328">readLine</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#fff">            </span>System<span style="color:#1f2328">.</span><span style="color:#1f2328">out</span><span style="color:#1f2328">.</span><span style="color:#1f2328">println</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;Server trả lời: &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>response<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#fff">            </span><span style="color:#57606a">// 5. Đóng kết nối</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#fff">            </span>socket<span style="color:#1f2328">.</span><span style="color:#1f2328">close</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff"> </span><span style="color:#cf222e">catch</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>IOException<span style="color:#fff"> </span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#fff">            </span>e<span style="color:#1f2328">.</span><span style="color:#1f2328">printStackTrace</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><h2 id="5-bài-tập-tại-lớp-oẳn-tù-tì-v3">5. Bài Tập Tại Lớp: Oẳn Tù Tì v3</h2>
<h3 id="yêu-cầu">Yêu cầu</h3>
<ol>
<li>Viết tiếp chương trình <strong>Oẳn Tù Tì v2</strong> để hỗ trợ <strong>3 người chơi đồng thời</strong></li>
<li>Sửa lỗi &ldquo;Null&rdquo; khi không có đủ người chơi hoặc khi kết nối bị gián đoạn</li>
<li>Cập nhật điểm số của từng người chơi sau mỗi lượt chơi</li>
<li>Hiển thị kết quả chi tiết của từng lượt chơi trên cả <strong>Server</strong> và <strong>Client</strong></li>
</ol>
<h3 id="gợi-ý-triển-khai">Gợi ý triển khai</h3>
<ul>
<li>
<p><strong>Server:</strong></p>
<ul>
<li>Sử dụng <strong>Thread</strong> để xử lý đồng thời kết nối từ 3 Client</li>
<li>Quản lý trạng thái của từng người chơi (tên, điểm số, lựa chọn)</li>
<li>Xác định kết quả của mỗi lượt chơi và gửi thông báo đến từng Client</li>
</ul>
</li>
<li>
<p><strong>Client:</strong></p>
<ul>
<li>Kết nối đến Server và gửi lựa chọn (Kéo, Búa, Bao)</li>
<li>Nhận kết quả từ Server và hiển thị trên màn hình</li>
</ul>
</li>
</ul>
<hr>
<h2 id="6-trắc-nghiệm-ôn-tập">6. Trắc Nghiệm Ôn Tập</h2>
<h3 id="câu-hỏi">Câu hỏi</h3>
<ol>
<li>
<p><strong>TCP</strong> là giao thức hướng kết nối. Điều này có nghĩa là gì?</p>
<ul>
<li>A. Dữ liệu được truyền đi mà không cần xác nhận</li>
<li>B. Kết nối phải được thiết lập trước khi truyền dữ liệu</li>
<li>C. Dữ liệu được truyền đi theo từng gói nhỏ không theo thứ tự</li>
<li>D. Không có cơ chế kiểm soát lỗi</li>
</ul>
<p><strong>Đáp án:</strong> B</p>
</li>
<li>
<p>Phương thức nào trong lớp <code>ServerSocket</code> được sử dụng để chấp nhận kết nối từ Client?</p>
<ul>
<li>A. <code>connect()</code></li>
<li>B. <code>accept()</code></li>
<li>C. <code>listen()</code></li>
<li>D. <code>bind()</code></li>
</ul>
<p><strong>Đáp án:</strong> B</p>
</li>
<li>
<p>Trong mô hình Client-Server, vai trò của Client là gì?</p>
<ul>
<li>A. Lắng nghe kết nối từ Server</li>
<li>B. Gửi yêu cầu dịch vụ đến Server</li>
<li>C. Xử lý yêu cầu và trả kết quả</li>
<li>D. Đóng kết nối khi không sử dụng</li>
</ul>
<p><strong>Đáp án:</strong> B</p>
</li>
</ol>
<hr>
<h2 id="7-thuyết-trình">7. Thuyết Trình</h2>
<h3 id="chủ-đề">Chủ đề</h3>
<ul>
<li><strong>Ứng dụng thực tế của TCP trong lập trình mạng</strong></li>
<li><strong>So sánh TCP và UDP: Khi nào nên sử dụng?</strong></li>
<li><strong>Thách thức và giải pháp khi lập trình ứng dụng mạng với TCP</strong></li>
</ul>
<hr>
<h2 id="8-hỏi--đáp">8. Hỏi &amp; Đáp</h2>
<h3 id="một-số-câu-hỏi-gợi-ý">Một số câu hỏi gợi ý</h3>
<ol>
<li>Làm thế nào để xử lý lỗi &ldquo;Connection Refused&rdquo; khi kết nối TCP?</li>
<li>Tại sao cần sử dụng <code>try-catch</code> khi làm việc với <code>Socket</code> và <code>ServerSocket</code>?</li>
<li>Làm thế nào để tối ưu hiệu suất khi xử lý nhiều kết nối đồng thời trên Server?</li>
</ol>
<hr>
<p><strong>Enjoy Learning!</strong></p>

</body>
</html>
